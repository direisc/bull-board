var e,t,n,r=require("@radix-ui/react-use-escape-keydown").useEscapeKeydown,o=require("@radix-ui/react-use-callback-ref").useCallbackRef,u=require("@radix-ui/react-use-body-pointer-events").useBodyPointerEvents,s=require("@radix-ui/react-primitive").Primitive,i=require("@radix-ui/primitive").composeEventHandlers,a=(e={},t=require("react"),Object.keys(t).forEach((function(n){"default"!==n&&"__esModule"!==n&&Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}})})),e),c=(n=require("@babel/runtime/helpers/extends"))&&n.__esModule?n.default:n;const[l,d]=y(),[f,v]=w(),[E,p]=y("TotalLayerCountWithDisabledOutsidePointerEventsProvider"),[m,b]=w("RunningLayerCountWithDisabledOutsidePointerEventsProvider"),C=/*#__PURE__*/a.forwardRef(((e,t)=>{const n=0===v(),r=/*#__PURE__*/a.createElement(P,c({},e,{ref:t}));return n?/*#__PURE__*/a.createElement(l,null,/*#__PURE__*/a.createElement(E,null,r)):r}));exports.DismissableLayer=C;const P=/*#__PURE__*/a.forwardRef(((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:l,onPointerDownOutside:E,onFocusOutside:C,onInteractOutside:P,onDismiss:y,...w}=e,L=d(),x=v()+1,D=x===L,O=p(n),g=b()+(n?1:0),h=g<O;u({disabled:n}),r((e=>{D&&(null==l||l(e),e.defaultPrevented||null==y||y())}));const{onPointerDownCapture:q}=function(e){const t=o(e),n=a.useRef(!1);return a.useEffect((()=>{const e=e=>{const r=e.target;if(r&&!n.current){const n=new CustomEvent("dismissableLayer.pointerDownOutside",{bubbles:!1,cancelable:!0,detail:{originalEvent:e}});r.addEventListener("dismissableLayer.pointerDownOutside",t,{once:!0}),r.dispatchEvent(n)}n.current=!1};return document.addEventListener("pointerdown",e),()=>document.removeEventListener("pointerdown",e)}),[t]),{onPointerDownCapture:()=>n.current=!0}}((e=>{h||(null==E||E(e),null==P||P(e),e.defaultPrevented||null==y||y())})),{onBlurCapture:R,onFocusCapture:B}=function(e){const t=o(e),n=a.useRef(!1);return a.useEffect((()=>{const e=e=>{const r=e.target;if(r&&!n.current){const n=new CustomEvent("dismissableLayer.focusOutside",{bubbles:!1,cancelable:!0,detail:{originalEvent:e}});r.addEventListener("dismissableLayer.focusOutside",t,{once:!0}),r.dispatchEvent(n)}};return document.addEventListener("focusin",e),()=>document.removeEventListener("focusin",e)}),[t]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}((e=>{null==C||C(e),null==P||P(e),e.defaultPrevented||null==y||y()})),F=O>0&&!h;/*#__PURE__*/return a.createElement(f,{runningCount:x},/*#__PURE__*/a.createElement(m,{runningCount:g},/*#__PURE__*/a.createElement(s,c({},w,{ref:t,style:{pointerEvents:F?"auto":void 0,...w.style},onPointerDownCapture:i(e.onPointerDownCapture,q),onBlurCapture:i(e.onBlurCapture,R),onFocusCapture:i(e.onFocusCapture,B)}))))}));function y(e){const t=/*#__PURE__*/a.createContext({total:0,setTotal:()=>{}}),n=({children:e})=>{const[n,r]=a.useState(0),o=a.useMemo((()=>({total:n,setTotal:r})),[n,r]);/*#__PURE__*/return a.createElement(t.Provider,{value:o},e)};return[n,function(e=!0){const{total:n,setTotal:r}=a.useContext(t);return a.useLayoutEffect((()=>{if(e)return r((e=>e+1)),()=>r((e=>e-1))}),[e,r]),n}]}function w(e){const t=/*#__PURE__*/a.createContext(0),n=e=>{const{children:n,runningCount:r}=e;/*#__PURE__*/return a.createElement(t.Provider,{value:r},n)};return[n,function(){return a.useContext(t)||0}]}const L=C;exports.Root=L;
//# sourceMappingURL=index.js.map
